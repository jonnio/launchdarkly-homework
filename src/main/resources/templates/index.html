<!doctype html>
<html lang="en" data-bs-theme="light">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Include Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
          rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
          crossorigin="anonymous">

    <script type="importmap">
        {
          "imports": {
            "vue": "https://unpkg.com/vue@3/dist/vue.esm-browser.js",
            "axios": "https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js",
            "tabulator": "https://unpkg.com/tabulator-tables@6.2.5/dist/js/tabulator_esm.min.js"
          }
        }
    </script>

    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

    <script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
            crossorigin="anonymous"></script>

<!--    <link href="https://unpkg.com/tabulator-tables@6.2.5/dist/css/tabulator.min.css" rel="stylesheet">-->
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/tabulator/6.2.5/css/tabulator_bootstrap5.min.css"
          integrity="sha512-qDEgvDbdp7tq+ytU/OgCzWfvbfdEe3pv0yEOMz/gurMcR0BWNgIF6I4VKeoACEj5E5PFf1uo3Vzuwk/ga9zeUg=="
          crossorigin="anonymous" referrerpolicy="no-referrer" />

    <title>LD Homework - Osborn</title>
</head>
<body>
<div class="container-fluid">
    <nav class="navbar navbar-expand-lg"> <!-- navbar-light bg-light-->
        <a class="navbar-brand" href="#">Navbar</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent"
                aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item active">
                    <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
                </li>
            </ul>
        </div>
    </nav>

    <h3>Olympic Results</h3>
    <p>See the results for each competition since 1896</p>
    <div id="app">

        <div id="medal-table" class="table table-striped table-light"></div>

    </div>

</div>
<script type="module">

    import {createApp, ref} from 'vue';
    import {TabulatorFull as Tabulator} from 'tabulator';

    const instance = axios.create({
        baseURL: '/api/olympics/',
        timeout: 1000,
        headers: {'Authorization': `Bearer ABCDEF`}
    });

    createApp({
        setup() {
            const msg = ref('Hello vue & [[${ message }]]')
            console.log(axios)
            return {
                msg
            }
        },
        data() {
            return {
                items: []
            };
        },
        mounted() {
            let table = new Tabulator("#medal-table", {
                height: 650,
                data: this.items,
                layout: "fitColumns",
                pagination: true,
                columns: [
                    {title: "Year", field: "olympicYear", width: 150},
                    {title: "City", field: "city", hozAlign: "left"},
                    {title: "Sport", field: "sport"},
                    {title: "Discipline", field: "discipline"},
                    {title: "Athlete", field: "athlete"},
                    {title: "Country", field: "country"},
                    {title: "Gender", field: "gender"},
                    {title: "Event", field: "event"},
                    {title: "Medal", field: "medal"},
                ],
            });
            instance
                .get('/results')
                .then(response => {
                    this.items = response.data;
                    table.setData(response.data);
                })
                .catch(error => {
                    console.error('Error fetching data:', error);
                });
        }
    }).mount('#app');


</script>

</body>
</html>